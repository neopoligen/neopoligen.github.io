<!DOCTYPE html>
<html lang="en">
<head>
<title>Why I Built Neopoligen</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta property="og:title" content="Why I Built Neopoligen" />
<meta property="og:description" content="a post from alan w. smith" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.neopoligen.com/en/2kn3czfj/?page=why-i-built-neopoligen" />
<meta property="og:image" content="https://www.neopoligen.com/neo-images/default-og-image/1200w.jpg" />

<link rel="apple-touch-icon" sizes="180x180" href="/theme/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/theme/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/theme/favicons/favicon-16x16.png">
<link rel="manifest" href="/theme/favicons/site.webmanifest">
<link rel="mask-icon" href="/theme/favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/theme/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/theme/favicons/browserconfig.xml">
<meta name="theme-color" content="#000000">
<link rel="stylesheet" href="/theme/styles/variables.css" />
<link rel="stylesheet" href="/theme/styles/theme.css" />
<link rel="stylesheet" href="/theme/styles/syntax-highlighting/code-solarized-dark.css" /><style>

button {
    color: red;
    font-weight: bold;
}

</style><style>

.book-grid {
  display: grid;
  grid-template-columns: 100px 1fr;
  gap: 20px;
}

.book-grid-alt {
  display: grid;
  grid-template-columns: 1fr 100px 1fr;
  gap: 20px;
}

.book-to-read-example-section {
  font-size: 0.85rem;
  border: 1px solid #333;
  padding: 1.2rem;
  border-radius: 0.3rem;
}

.example-grid {
  --min: 15ch;
  --gap: 1rem;
  display: grid;
  grid-gap: var(--gap);
  grid-template-columns: repeat(
    auto-fit, 
    minmax(
      min(100%, var(--min)), 1fr
    )
  );
}

.green {
    color: green;
}

.neo-example {
  font-size: 0.85rem;
  border: 1px solid #333;
  padding: 1.2rem;
  border-radius: 0.3rem;
}

</style><script>

function addToCounter() {
    const btn = document.querySelector("#count_btn")
    const count = parseInt(btn.dataset.count, 10)
    btn.dataset.count = count + 1
    btn.innerHTML = `Counter: ${btn.dataset.count}`
}

document.addEventListener("DOMContentLoaded", () => {
    const btn = document.querySelector("#count_btn")
    btn.addEventListener("click", addToCounter)
})

</script></head>
<body>
<header>
      <a href="/">Home</a>
      
    </header>
<main class="flow">

<section class="title-section flow">
<hgroup>

  
    <h1 class="page-title">
    
      Why I Built Neopoligen
    
    </h1>
    
  

</hgroup>






    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Intro
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

Making your own website builder is generally considered 




a silly thing to do. There are a ton of great site 




generators out there. If you're goal is simply to build 




a website, spending time "reinventing the wheel" isn't 




worth it. 

</p>




    
<p>

So, why did I build my own? Because, it wasn't 




about the websites. It was about replacing markdown.

</p>





    

    

    

</section>

<section class="note-section">

<div class="note-title">Quick Note</div>

<div class="flow">


      
        
<p>

If you want to see what my format looks like you can 





<a href="https://github.com/neopoligen/neopoligen.github.io/blob/main/content/why-i-built-neopoligen.neo" target="_blank">check out the source file for this page here↗
</a>

</p>

      



</div>



    

</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      The Case Against Markdown
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

I started using Markdown

<sup><a 
    href="#fnref-1-text"
    id="fnref-1-link"
    >1</a></sup>


 for my notes for as soon




as learned about the format. I love writing notes




in plain

-

text files. I also publish a huge chunk of




my notes on my website. So, having a format that




outputs to HTML is ideal. 

</p>




    
<p>

There are things I don't like about it though

:

</p>





    

    

    

</section>
<ul class="flow">


<li class="flow">


<p>

It's very limited in what you can do with it. 




Basically just headings, lists, links, basic images,




and code blocks

</p>



</li>


<li class="flow">


<p>

There's no built

-

in way to add more content block types 

</p>



</li>


<li class="flow">


<p>

There's no built

-

in way to apply attributes to sections

</p>



</li>


<li class="flow">


<p>

There's no built

-

in way to apply attributes to inline text

</p>



</li>



</ul>


<section class="p-section flow">


      
        
<p>

I bumped up against those limitations enough that it sent




me on the search for something else.

</p>

      





    


</section>


<section class="aside-section">
    <div class="aside-title">Aside</div>
<aside class="flow">


      
        
<p>

Yes, I know you can just write HTML to address some




of those things, but I want my content format to handle 




things natively. 

</p>

      



</aside>



    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      The Case Against MDX, Etc...
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

I started looking at MDX when I hit my frustration 




limit with Markdown. It looked promising, but 




after getting it to work I realized I don't really




like working with the JSX. 

</p>




    
<p>

I took a look at Markdoc and some other formats




too. They offered different feature sets, but nothing




quite did what I wanted. So, I decided to start




from scratch. 

</p>





    

    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Designing Neopolitan
    
    </h2>
    
  

  

  

  

  

</hgroup>






    
<p>

My website is over twenty years old. I've moved content 




repeatedly over the decades. I've used plain HTML, 




wordpress, django databases, ruby on rails, custom databases, 




markdown, MDX, and probably a few other things I've forgotten. 

</p>




    
<p>

I never want to have to migrate content again. 

</p>




    
<p>

That meant coming up with a single format that could do everything I can




think of at the moment and everything I can envision wanting to




do in the future. All without relying on a framework or specific language. 

</p>




    
<p>

I ended up with the format I'm calling Neopolitan. I tried to 




keep it as simple as possible.

</p>





    

    

    

    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Templates Not JavaScript
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

I'm tired of jumping JavaScript frameworks. One of the 




final straws that sent me down the path of making my




own site generator was  when I went fix a spelling 




error on a site I hadn't touched in a few months and




everything broke because some dependency in the 




framework changed. 

</p>




    
<p>

Neopoligen is pretty basic at it's core. It parses




Neopolitan files to create ASTs that are sent




to the template engine for rendering. There's still




some things to add to the AST, but the goal is to




get the point where any changes are additive so that 




existing templates will always continue to work with 




future updates.

</p>





    

    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Neopolitan Sections And Spans
    
    </h2>
    
  

  

</hgroup>






    
<p>

You can read more details about how the format works on 




<a href="/en/2ikuxluk/?page=neopoligen">the home page</a>


, but it mainly breaks down




like this

:

</p>





    

    

</section>
<ul class="flow">


<li class="flow">


<p>

Each page is made of sections

</p>



</li>


<li class="flow">


<p>

Each section has a defined type

</p>



</li>


<li class="flow">


<p>

Each section can have attributes

</p>



</li>


<li class="flow">


<p>

The content in each section can have spans

</p>



</li>


<li class="flow">


<p>

Each span has a defined type

</p>



</li>


<li class="flow">


<p>

Each span can have attributes

</p>



</li>



</ul>


<section class="p-section flow">


      
        
<p>

The most important point about the sections and spans




is that they are arbitrary. The default theme ships




with several basic ones to get started, but you can make 




new ones on the fly.

</p>

      

      
        
<p>

There's not a lot to it, but that's kinda the point. 




Complexity is friction and friction keeps me from




making things. I want to reduce it as much as 




possible. 

</p>

      





    

    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Sections
    
    </h2>
    
  

  

</hgroup>






    
<p>

Neopolitan sections open with a line that has two 




dashes followed by the kind of section. For example

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>-- note

This is a note

-- aside

This is an aside

-- warning

This is a warning</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Which outputs

:

</p>

      



</section>





<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

This is a note

</p>

      



</div>



    

</section>


<section class="aside-section">
    <div class="aside-title">Aside</div>
<aside class="flow">


      
        
<p>

This is an aside

</p>

      



</aside>



    


</section>
<section class="warning-section">

<div class="note-title">
Warning</div>

<div class="flow">


      
        
<p>

This is a warning

</p>

      



</div>



</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Section Attributes
    
    </h2>
    
  

  

</hgroup>






    
<p>

Section attributes are created by adding lines




started with two dashes directly below the opening 




section line. For example, here's a "class" attribute




added to a "p" section to apply a CSS style to 




the section to change the of the text

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>-- p
-- class: green

Pour the stew from the pot into the plate

Raise the sail and steer the ship northward</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Which outputs

:

</p>

      



</section>





<section class="neo-example green p-section flow">


      
        
<p>

Pour the stew from the pot into the plate

</p>

      

      
        
<p>

Raise the sail and steer the ship northward

</p>

      





    

    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Section Templates
    
    </h2>
    
  

  

</hgroup>






    
<p>

Neopoligen works by mapping the different types of 




sections to corresponding MiniJinja

<sup><a 
    href="#fnref-4-text"
    id="fnref-4-link"
    >4</a></sup>


 templates

<sup><a 
    href="#fnref-5-text"
    id="fnref-5-link"
    >5</a></sup>


. 




There are several templates built into the app, but you 




can also make your own. For example, here's a section type




 I made called "book

-

to

-

read

-

example"

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>-- book-to-read-example
-- title: The Peripheral
-- author: William Gibson
-- image: &#x2f;neo-images&#x2f;the-peripheral-cover&#x2f;100w.jpg

I&#x27;ve read a bunch of other William Gibson stuff and can&#x27;t
wait to get to this one!</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Which looks like this

:

</p>

      



</section>





<section class="book-to-read-example-section flow">

<div class="book-grid">
  <div class="book-image">
  <img src="/neo-images/the-peripheral-cover/100w.jpg" 
    alt="Book cover for The Peripheral by William Gibson"
    />
  </div> 
  <div>
    <h4>
    The Peripheral
    </h4>

    <div>By: 
    William Gibson
    </div>
    

      
        
<p>

I've read a bunch of other William Gibson stuff and can't




wait to get to this one!

</p>

      



  </div>
</div>



    

</section>

<section class="p-section flow">


      
        
<p>

It's important to point out that there's no difference




between the templates that ship with Neopoligen and the




ones you make. You can make as many arbitrary sections




as you want. They are all treated the same way.

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Alternate Templates
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

Each section has a default template. Additional 




templates can be built for them as well. Switching 




to one of the alternates is done by adding a 




"template" attribute to the section. 

</p>




    
<p>

Here's the same example as above but calling




a template called "alt"

:

</p>





    

    

    

</section><section class="neo-example pre-section">



<pre>-- book-to-read-example
-- title: The Peripheral
-- author: William Gibson
-- image: &#x2f;neo-images&#x2f;the-peripheral-cover&#x2f;100w.jpg
-- template: alt

I&#x27;ve read a bunch of other William Gibson stuff and can&#x27;t
wait to get to this one!</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Which looks like this

:

</p>

      



</section>





<section class="book-to-read-example-section flow">

<div class="book-grid-alt">

  <div>

    <div>
    William Gibson
    </div>
    <h4>
    The Peripheral
    </h4>


  <div>
    

      
        
<p>

I've read a bunch of other William Gibson stuff and can't




wait to get to this one!

</p>

      



  </div>

  </div>


  <div class="book-image">
  <img src="/neo-images/the-peripheral-cover/100w.jpg" 
    alt="Book cover for The Peripheral by William Gibson"
    />
  </div> 

</div>



    


</section>


<section class="p-section flow">


      
        
<p>

There's a clean separation of concerns between




the content and the layout. 

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Nesting Sections
    
    </h2>
    
  

  

</hgroup>






    
<p>

One of the biggest differences between Neopolitan and




markdown is that sections can be nested. This is done




by adding a "/" to the end of a section name where




you want the nesting to start and then closing the




nesting with a corresponding section that starts with 




a "/". For example

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>-- div&#x2f;
-- class: example-grid

    -- note

    Fly by night, and you waste little time

    -- note

    Pull the dart from the cork target

    -- note

    Pick a card and slip it under the pack

-- &#x2f;div</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Outputs

:

</p>

      



</section>



<section class="example-grid unknown-section flow">

      
        

<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

Fly by night, and you waste little time

</p>

      



</div>



    

</section>

      

      
        

<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

Pull the dart from the cork target

</p>

      



</div>



    

</section>

      

      
        

<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

Pick a card and slip it under the pack

</p>

      



</div>



    

</section>

      

      




    

    

    

    
        

</section>



    


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Spans
    
    </h2>
    
  

  

</hgroup>






    
<p>

Spans are sections of content that look like this

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>This is &lt;&lt;strong|bold text&gt;&gt;</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

Which outputs

:

</p>

      





    


</section>


<section class="neo-example p-section flow">


      
        
<p>

This is 

<strong 

>bold text</strong>

</p>

      





    


</section>


<section class="p-section flow">


      
        
<p>

They work similar to sections in the each one has




a corresponding template. Spans default to putting




their text inside the corresponding HTML tag (e.g.




"strong", "em", etc...). 

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Span Attributes
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

Spans can take optional attributes. They can be




used for things like setting a CSS class on them. 

</p>




    
<p>

For example, this

:

</p>





    

    

    

</section><section class="neo-example pre-section">



<pre>This is &lt;&lt;strong|green bold text|class: green&gt;&gt;</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

Turns into this

:

</p>

      





    


</section>


<section class="neo-example p-section flow">


      
        
<p>

This is 

<strong 
 class="green"

>green bold text</strong>

</p>

      





    


</section>


<section class="p-section flow">







</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Span Templates
    
    </h2>
    
  

  

</hgroup>






    
<p>

Span templates don't have to map directly to HTML 




tags. They can be used to create more complicated




output. Take this "tablink" for example

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>&lt;&lt;tablink|text to link|https:&#x2f;&#x2f;www.example.com&gt;&gt;</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

It's used to create a link to another page that




opens in a different tab like this

:

</p>

      





    


</section>


<section class="neo-example p-section flow">


      
        
<p>


<a href="https://www.example.com" target="_blank">text to link↗
</a>

</p>

      





    


</section>


<section class="p-section flow">


      
        
<p>

The template creates the link, points it to the "

_

blank"




target for the new tab, and then appends the character




to identify that it's going to a new tab. 

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Built
    
      -
    
      In Test Suite
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

Each template can have a set of tests associated with it




to make sure it's doing the right thing. All the tests




are run each time a site is generated and a report shows




any errors. 

</p>




    
<p>

The tests themselves are done in Neopolitan files that




look like this

:

</p>





    

    

    

</section><section class="neo-example pre-section">



<pre>-- start-theme-test

-- p

Alfa bravo charlie 

Delta echo foxtrot

-- expected-output&#x2f;

&lt;section class=&quot;p-section flow&quot;&gt;
&lt;p&gt;Alfa bravo charlie&lt;&#x2f;p&gt;
&lt;p&gt;Delta echo foxtrot&lt;&#x2f;p&gt;
&lt;&#x2f;section&gt;

-- &#x2f;expected-output</pre>


    
</section>






<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Adding CSS
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

My website includes a lot of my notes. Lots of those




have little pieces of CSS. To help accommodate this I use a 




<code class=""><span class="text plain">-- css</span></code>

 section type. The default template 




for the section type is empty. So, nothing renders




directly on the page. Instead I added the content 




of the section to the 

<

head

>

 of the document at the 




page level (which is just another template). 

</p>




    
<p>

Of course, since it's a section, we can create a new template




that 

<em 

>does</em>

 output its contents and call it




to show the code on the page too. For example, this




adds css for the 

<code class=""><span class="source css"><span class="meta selector css"><span class="entity other attribute-name id css"><span class="punctuation definition entity css">#</span>count_btn</span></span></span></code>

 to the




page

:

</p>





    

    

    

</section><section class="neo-example pre-section">



<pre>-- css
-- template: show

button {
    color: red;
    font-weight: bold;
}</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

And, it outputs this on the page

:

</p>

      





    


</section>


<section class="neo-example css-section">


<h4>CSS</h4>


<div class="pad-top-1">
<pre class="code-pre"><code><span class="line-marker"></span><span class="source css"><span class="meta selector css"><span class="entity name tag css">button</span> </span><span class="meta property-list css"><span class="punctuation section property-list css">{</span>
<span class="line-marker"></span>    <span class="meta property-name css"><span class="support type property-name css">color</span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="support constant color w3c-standard-color-name css">red</span></span><span class="punctuation terminator rule css">;</span>
<span class="line-marker"></span>    <span class="meta property-name css"><span class="support type property-name css">font-weight</span></span><span class="punctuation separator key-value css">:</span><span class="meta property-value css"> </span><span class="meta property-value css"><span class="support constant property-value css">bold</span></span><span class="punctuation terminator rule css">;</span>
<span class="line-marker"></span></span><span class="punctuation section property-list css">}</span></span></code></pre>
</div>


</section>

<section class="p-section flow">


      
        
<p>

I get hugely frustrated when I'm reading a blog post




where someone puts in CSS that they say does something




but when you copy/paste it it doesn't work. This goes




a long way to avoiding that since the code displayed 




on the page is literally the same code that's in




the 

<

head

>

 of the document. 

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Adding HTML
    
    </h2>
    
  

  

</hgroup>






    
<p>

Adding HTML on the page is done in a similar manner 




to CSS. The biggest difference is that it outputs




where you put it instead of in the 

<

head

>

 of the




document. So, this

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>-- html

&lt;button&gt;This button does nothing&lt;&#x2f;button&gt;</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

Outputs

:

</p>

      





    


</section>
<section class="neo-example html-section">

<button>This button does nothing</button>

</section>

<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

The red/bold font in the button is from the 




CSS that was added to the page in the 




example above. 

</p>

      



</div>



    

</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Showing HTML
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

Like CSS, you can also make templates




that show the source code along with the actual




items in the DOM. 

</p>




    
<p>

For example, this

:

</p>





    

    

    

</section><section class="neo-example pre-section">



<pre>-- html
-- template: show-above

&lt;button id=&quot;count_btn&quot; data-count=&quot;0&quot;&gt;
    Counter: 0
&lt;&#x2f;button&gt;</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

Outputs this

:

</p>

      





    


</section>
<section class="neo-example html-section">
<h4>HTML</h4>
<div class="pad-top-1">
<pre class="code-pre"><code><span class="line-marker"></span><span class="text html basic"><span class="meta tag inline form html"><span class="punctuation definition tag begin html">&lt;</span><span class="entity name tag inline form html">button</span> <span class="meta attribute-with-value id html"><span class="entity other attribute-name id html">id</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value id html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span></span></span><span class="meta attribute-with-value id html"><span class="string quoted double html"><span class="meta toc-list id html">count_btn</span><span class="punctuation definition string end html">&quot;</span></span></span> <span class="meta attribute-with-value html"><span class="entity other attribute-name html">data-count</span><span class="punctuation separator key-value html">=</span></span><span class="meta attribute-with-value html"><span class="string quoted double html"><span class="punctuation definition string begin html">&quot;</span>0<span class="punctuation definition string end html">&quot;</span></span></span><span class="punctuation definition tag end html">&gt;</span></span>
<span class="line-marker"></span>    Counter: 0
<span class="line-marker"></span><span class="meta tag inline form html"><span class="punctuation definition tag begin html">&lt;/</span><span class="entity name tag inline form html">button</span><span class="punctuation definition tag end html">&gt;</span></span></span></code></pre>
</div>

<h4 class="pad-top-1">Output</h4>
<div class="pad-top-1">

<button id="count_btn" data-count="0">
    Counter: 0
</button>

</div>
</section>

<section class="p-section flow">


      
        
<p>

This helps make sure that any HTML samples in 




blog posts and tutorials actually work because




the same code that's used for the DOM is what's




actually displayed. 

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Adding JavaScript
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

You can add JavaScript to the 

<

head

>

 of a document 




the same way you can with CSS. By default, it doesn't 




show on the page, but you can use a template 




to show it as well. 

</p>




    
<p>

For example

:

</p>





    

    

    

</section><section class="neo-example pre-section">



<pre>-- javascript
-- template: show

function addToCounter() {
    const btn = document.querySelector(&quot;#count_btn&quot;)
    const count = parseInt(btn.dataset.count, 10)
    btn.dataset.count = count + 1
    btn.innerHTML = `Counter: ${btn.dataset.count}`
}

document.addEventListener(&quot;DOMContentLoaded&quot;, () =&gt; {
    const btn = document.querySelector(&quot;#count_btn&quot;)
    btn.addEventListener(&quot;click&quot;, addToCounter)
})</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Adds the code to the 

<

head

>

 of the document and




outputs this on the page

:

</p>

      



</section>





<section class="neo-example javascript-section">


<h4>JavaScript</h4>


<div class="pad-top-1">
<pre class="code-pre"><code><span class="line-marker"></span><span class="source js"><span class="meta function declaration js"><span class="storage type function js">function</span> <span class="entity name function js">addToCounter</span><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span></span><span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">btn</span> <span class="keyword operator assignment js">=</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelector</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>#count_btn<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">count</span> <span class="keyword operator assignment js">=</span> <span class="meta function-call js"><span class="support function js">parseInt</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="variable other object js">btn</span><span class="punctuation accessor js">.</span><span class="meta property object js">dataset</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span><span class="punctuation separator comma js">,</span> <span class="constant numeric js">10</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">btn</span><span class="punctuation accessor js">.</span><span class="meta property object js">dataset</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span> <span class="keyword operator assignment js">=</span> <span class="variable other readwrite js">count</span> <span class="keyword operator arithmetic js">+</span> <span class="constant numeric js">1</span>
<span class="line-marker"></span>    <span class="variable other object js">btn</span><span class="punctuation accessor js">.</span><span class="meta property object js">innerHTML</span> <span class="keyword operator assignment js">=</span> <span class="string template js"><span class="punctuation definition string template begin js">`</span>Counter: </span><span class="meta template expression js"><span class="punctuation definition template-expression begin js">${</span></span><span class="meta template expression js"><span class="source js embedded expression"><span class="variable other object js">btn</span><span class="punctuation accessor js">.</span><span class="meta property object js">dataset</span><span class="punctuation accessor js">.</span><span class="meta property object js">count</span></span><span class="punctuation definition template-expression end js">}</span></span><span class="string template js"><span class="punctuation definition string template end js">`</span></span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span>
<span class="line-marker"></span>
<span class="line-marker"></span><span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListener</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>DOMContentLoaded<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
<span class="line-marker"></span>    <span class="storage type js">const</span> <span class="variable other readwrite js">btn</span> <span class="keyword operator assignment js">=</span> <span class="support type object dom js">document</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">querySelector</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>#count_btn<span class="punctuation definition string end js">&quot;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span>    <span class="variable other object js">btn</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">addEventListener</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted double js"><span class="punctuation definition string begin js">&quot;</span>click<span class="punctuation definition string end js">&quot;</span></span><span class="punctuation separator comma js">,</span> <span class="variable other readwrite js">addToCounter</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
<span class="line-marker"></span><span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span></span></code></pre>
</div></section>


<section class="p-section flow">


      
        
<p>

You can verify that the code works by clicking




the button in the HTML section. (Again, this is in




an effort to make sure that any samples I show




actually work)

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      External Scripts And 
    
      <
    
      head
    
      >
    
       Content
    
    </h2>
    
  

  

</hgroup>






    
<p>

The 

<code class=""><span class="text plain">-- head</span></code>

 section is used to add things




directly to the 

<

head

>

 of a page. This can be used to call




external JS libraries like P5, D3, etc... or anything




else that you need to load onto the page. 

</p>





    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Section Syntax Highlighting
    
    </h2>
    
  

  

</hgroup>






    
<p>

Neopoligen includes a built in syntax highlighter. I use




it in 

<code class=""><span class="text plain">-- code</span></code>

 sections by passing the name of




the language like this

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>-- code
-- rust

fn main() {
    println!(&quot;Hello, world&quot;);
}</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Which outputs

:

</p>

      



</section>





<section class="neo-example code-section">





<pre class="code-pre"><code><span class="line-marker"></span><span class="source rust"><span class="meta function rust"><span class="meta function rust"><span class="storage type function rust">fn</span> </span><span class="entity name function rust">main</span></span><span class="meta function rust"><span class="meta function parameters rust"><span class="punctuation section parameters begin rust">(</span></span><span class="meta function rust"><span class="meta function parameters rust"><span class="punctuation section parameters end rust">)</span></span></span></span><span class="meta function rust"> </span><span class="meta function rust"><span class="meta block rust"><span class="punctuation section block begin rust">{</span>
<span class="line-marker"></span>    <span class="support macro rust">println!</span><span class="meta group rust"><span class="punctuation section group begin rust">(</span></span><span class="meta group rust"><span class="string quoted double rust"><span class="punctuation definition string begin rust">&quot;</span>Hello, world<span class="punctuation definition string end rust">&quot;</span></span></span><span class="meta group rust"><span class="punctuation section group end rust">)</span></span><span class="punctuation terminator rust">;</span>
<span class="line-marker"></span></span><span class="meta block rust"><span class="punctuation section block end rust">}</span></span></span></span></code></pre>

</section>

<section class="p-section flow">


      
        
<p>

Syntax highlighting is done with classes instead of inline




styles so things can be controlled from style sheets.

</p>

      

      
        
<p>

The highlighter also adds span at the start of each line that




can be used as a target for adding CSS line numbers as seen above. 

</p>

      





    

    


</section>


<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

Eventually, this will be a web component that has a copy button, 




displays the language, and has the ability to turn wrapping on 




and off. It's just a matter of updating the template to make




that happen. 

</p>

      



</div>



    

</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Span Syntax Highlighting
    
    </h2>
    
  

  

</hgroup>






    
<p>

Language specific syntax highlighting can be done one inline




code too. 

</p>





    

    

</section><section class="neo-example pre-section">



<pre>Rust code: &lt;&lt;code|println!(&quot;hello&quot;);|rust&gt;&gt;</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Which outputs

:

</p>

      



</section>





<section class="neo-example p-section flow">


      
        
<p>

Rust code

:

 

<code class=""><span class="source rust"><span class="support macro rust">println!</span><span class="meta group rust"><span class="punctuation section group begin rust">(</span></span><span class="meta group rust"><span class="string quoted double rust"><span class="punctuation definition string begin rust">&quot;</span>hello, world<span class="punctuation definition string end rust">&quot;</span></span></span><span class="meta group rust"><span class="punctuation section group end rust">)</span></span><span class="punctuation terminator rust">;</span></span></code>

</p>

      





    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Footnotes
    
    </h2>
    
  

  

</hgroup>






    
<p>

I love footnotes. They make it easier for me to write




at a higher level then point to more detail later 




which makes for better prose. There's a shorthand




built into Neopoligen for adding the footnote numbers




in the content that looks like this

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>This is a footnote^^6^^</pre>


    
</section>






<section class="p-section flow">


      
        
<p>

Which outputs

:

</p>

      





    


</section>


<section class="neo-example p-section flow">


      
        
<p>

This is a footnote

<sup><a 
    href="#fnref-6-text"
    id="fnref-6-link"
    >6</a></sup>


</p>

      





    


</section>


<section class="p-section flow">


      
        
<p>

These correspond to a footnote section that has




an id attribute with the same number. For example,




this is the section that produces the footnote




that's at the bottom of the page

:

</p>

      





    


</section>
<section class="neo-example pre-section">



<pre>-- footnote
-- id: 6

This is the target footnote for the example in
the main content.</pre>


    
</section>






<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Responsive Image Optimization
    
    </h2>
    
  

  

</hgroup>






    
<p>

I used to be a professional photographer. I don't shoot




as much these days, but I still want it to be easy to 




work with photos. Neopoligen is set up so I can throw




my full size images into a directory and it'll automatically




make multiple sizes of them that can be used with 

<code class=""><span class="text plain">srcset</span></code>

.

</p>





    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Calling Images By Name
    
    </h2>
    
  

  

  

  

</hgroup>






    
<p>

Another image related thing I always found a pain was dealing




with the paths for the images. Neopoligen deals with this




by calling images by name regardless of where they are stored




in the source images directory. The data returns to the 




template includes all the available responsive sizes for




building a 

<code class=""><span class="text html basic">srcset</span></code>

 attribute. 

</p>




    
<p>

You can also skip the extension. This means if you ever decide 




to to something like upgrading all your .jpg files to .webp, 




they'll continue to work without having to go back and re

-

name 




everything. 

</p>




    
<p>

The default way to call an image looks like this

:

</p>





    

    

    

    

</section><section class="neo-example pre-section">



<pre>-- image
-- large-test-image
-- alt: The words &#x27;Large Test jpg&#x27; are in dark blue
-- alt: text on a black background in the upper right.
-- alt: Most of a red circle shows up in the upper left,
-- alt: and most of the bottom is covered by a curved
-- alt: blue shape that just gives some shape for
-- alt: this test image.</pre>


    
</section>






<img 
src="/neo-images/large-test-image/4000w.jpg" />


<section class="p-section flow">


      
        
<p>

The example also shows how alt text can be added to




image including extended alt text that would otherwise




end up in a single very long line in the content file. 

</p>

      





    


</section>


<section class="note-section">

<div class="note-title">
Note</div>

<div class="flow">


      
        
<p>

I'm refactoring the way images handling. The srcset and alt




text might not show depending on when you see this. And, yes,




if you have two files with the same name it creates a "race




condition" where you don't know which image will show up. 




I'm adding a feature to warn you about that, but either way




it's a minor issue compared to the convenience of not 




having to mess with file paths. 

</p>

      



</div>



    

</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Automatic Image Alt Text Ingestion
    
    </h2>
    
  

  

</hgroup>






    
<p>

The International Press Telecommunications Council

<sup><a 
    href="#fnref-7-text"
    id="fnref-7-link"
    >7</a></sup>


 (which




is responsible for setting standards for the new media) added




Alt Text fields to their spec

<sup><a 
    href="#fnref-8-text"
    id="fnref-8-link"
    >8</a></sup>


. These have been included in




Photo Mechanic, Photoshop, Brdige, and Lightroom (the tools I use




for editing my photographs). This means you can store alt




text directly in your images. Neopoligen pulls that metadata




if it's available and uses it for image alt text. 

</p>





    

    

</section>

<section class="aside-section">
    <div class="aside-title">Aside</div>
<aside class="flow">


      
        
<p>

I love only having to edit image metadata once per image and




doing it when I make the image instead of when I'm trying




to include it. With luck, everything will work this way eventually.

</p>

      



</aside>



    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Open Graph Image Generation
    
    </h2>
    
  

  

</hgroup>






    
<p>

Neopoligen is set up to automatically generate Open Graph images




that include the title of the page for use in previewing




on other sites. You can also create custom ones for individual




posts as well. 

</p>





    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      RSS Feeds
    
    </h2>
    
  

  

</hgroup>






    
<p>

I love RSS Feeds. There's been a bit of a resurgence of them




recently and I want to participate. I'm still figuring out




the exact approach I want to use but Neopoligen will be able




to provide multiple feeds that can be filtered based off




different criteria (e.g. just posts, just photos, or everything)  

</p>





    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      RSS Timeline
    
    </h2>
    
  

  

</hgroup>






    
<p>

I'm still working on this, but the basic idea is to create




a list of other RSS feeds and then include links to the 




individual posts as a form of timeline. 

</p>





    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Microblog
    
    </h2>
    
  

  

</hgroup>






    
<p>

Microblog style posts can be made without having to worry 




about making a title. 

</p>





    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      DB Style Collections
    
    </h2>
    
  

  

  

</hgroup>






    
<p>

This is still a work in progress, but the goal is to be able 




to query across all my content files to make collections out




of them. For example, I'm making a book section type. By adding




and 

<code class=""><span class="text plain">-- read</span></code>

 attribute to it I can create pages




showing what I want to read and what I've read independently. 




When I read a book, I'll update the attribute for it and it'll




move automatically. 

</p>




    
<p>

This is actually one of the most exciting things for me. The idea




that I can use flat files to store content and then query things




like a database opens the door for so many possibilities. 

</p>





    

    

    

</section>

<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Permanent URLs
    
    </h2>
    
  

  

</hgroup>






    
<p>

I don't want to have to think about URLs. And, if I 




ever migrate to new software I want to make it as easy




as possible to match the existing URls so I don't have to




do a bunch of redirects. To address this I set up 




Neopoligen so that every page must have an ID and that




ID is what's used by default for the URL. The base 




URL for any post is

:

</p>





    

    

</section>

<section class="neo-example pre-section">


<pre>/LANGUAGE/ID</pre>

</section>

<section class="p-section flow">


      
        
<p>

For example, this page is always available at

:

</p>

      





    


</section>


<section class="neo-example pre-section">


<pre>/en/2kn3czfj</pre>

</section>

<section class="p-section flow">


      
        
<p>

URLs are made more human readable to appending the




title in a "query parameter" like this

:

</p>

      





    


</section>


<section class="neo-example pre-section">


<pre>/en/2kn3czfj/?page=why-i-built-neopoligen</pre>

</section>

<section class="p-section flow">


      
        
<p>

Because of the way the site is served the title




can change and both the old and new URLs 




will continue to work without having to build




a redirects setup.

</p>

      

      
        
<p>

They aren't the prettiest URLs. I'm also unsure




of what the SEO impact of moving the titles to 




query strings is. But, I don't care. This is 




very much a case where I prefer function (designed




to prevent link rot) over form. 

</p>

      





    

    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Automatic Linking
    
    </h2>
    
  

  

</hgroup>






    
<p>

Because URLs are ID based it's trivial to use them




to create links between pages. Two built

-

in templates




provide links with either custom text or the 




title of the page being linked to. For example

:

</p>





    

    

</section><section class="neo-example pre-section">



<pre>This is a &lt;&lt;ilink|custom text link|2kiw8tvv&gt;&gt;

Link with title: &lt;&lt;tlink|2kiw8tvv&gt;&gt;</pre>


    
</section>


<section class="p-section flow">


      
        
<p>

Outputs

:

</p>

      



</section>





<section class="neo-example p-section flow">


      
        
<p>

This is a 

<a href="/en/2kiw8tvv/?page=todo-list">custom text link</a>


</p>

      

      
        
<p>

Link with title

:

 

<a href="/en/2kiw8tvv/?page=todo-list">
  TODO List
</a>

</p>

      





    

    


</section>


<section class="h2-section flow">
<hgroup>

  
    <h2 class="section-heading">
    
      Wrapping Up
    
    </h2>
    
  

  

  

  

</hgroup>






    
<p>

I've been working on Neopolitan and Neopoligen 




for a couple years at this point. The idea above




are the refinement of all that time. My goal is




to be able to use the format and the engine for 




the next twenty years. But, even if the engine




doesn't last, I'm pretty confident at this point




that the format will stick with me. 

</p>




    
<p>

It's been a lot of work, but I couldn't be 




happier with the results. 

</p>




    
<p>

If you've got any questions or just want to reach




out, you can hit me up on 





<a href="https://hachyderm.io/@TheIdOfAlan">Mastodon</a>

</p>





    

    

    

    

</section><div class="fin-token">~ fin ~</div>


      <section>
        <h2>Footnotes</h2>
        <ul class="flow">
    
    <li class="footnote-ref"><div id="fnref-1-text" class="footnote-number">
    <a href="#fnref-1-link">1</a>
  </div><div class="footnote-text"><a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a><div class="flow">

      
        
<p>

The lightweight markup language that's used all




over the place in the tech world. 

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-1-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-2-text" class="footnote-number">
    <a href="#fnref-2-link">2</a>
  </div><div class="footnote-text"><a href="https://mdxjs.com/">MDX</a><div class="flow">

      
        
<p>

A way to add JSX to Markdown

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-2-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-3-text" class="footnote-number">
    <a href="#fnref-3-link">3</a>
  </div><div class="footnote-text"><div class="flow">

      
        
<p>

There are also JSON and YAML sections on the way for 




using more complicated data structures

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-3-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-4-text" class="footnote-number">
    <a href="#fnref-4-link">4</a>
  </div><div class="footnote-text"><a href="https://docs.rs/minijinja/latest/minijinja/">MiniJinja</a><div class="flow">

      
        
<p>

A rust template engine based of the Jinja2 template




engine from Python

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-4-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-5-text" class="footnote-number">
    <a href="#fnref-5-link">5</a>
  </div><div class="footnote-text"><div class="flow">

      
        
<p>

If there's no matching template for a specific section




or span type a generic replacement is used

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-5-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-6-text" class="footnote-number">
    <a href="#fnref-6-link">6</a>
  </div><div class="footnote-text"><div class="flow">

      
        
<p>

This is the target footnote for the example in




the main content. Note that there's nothing magical 




about them. They are built from section and span




templates just like everything else.

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-6-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-7-text" class="footnote-number">
    <a href="#fnref-7-link">7</a>
  </div><div class="footnote-text"><a href="https://iptc.org/">International Press Telecommunications Council</a><div class="flow">

      
        
<p>

The global standards body of the news media. Responsible




for making the IPTC metadata spec.

</p>

      


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-7-link">&#x2934;</a>
  </div>
</li><li class="footnote-ref"><div id="fnref-8-text" class="footnote-number">
    <a href="#fnref-8-link">8</a>
  </div><div class="footnote-text"><a href="https://iptc.org/news/iptc-announces-new-properties-in-photo-metadata-to-make-images-more-accessible/">IPTC Announces New Properties in Photo Metadata to Make Images More Accessible</a><div class="flow">


</div>
</div><div class="footnote-return-arrow">
    <a href="#fnref-8-link">&#x2934;</a>
  </div>
</li>
    </ul>
    </section>
  </main>
<footer></footer>






</body>

